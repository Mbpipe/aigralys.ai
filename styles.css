/* ========================================
 Aigralys.ai — Global Styles (canonical)
 Nav blindado: solo #primary-nav > .nav-links
======================================== */

/* Reset & base */
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --primary-dark:#1C1C1E;--secondary-dark:#2D2D3A;
  --accent-gold:#FECF4A;--hover-gold:#FFD968;
  --neutral-light:#E6E6E6;--neutral-mid:#A0A0A0;
  --card-bg:#252530;--header-h:64px;
}
html{scroll-behavior:smooth}
body{background:var(--primary-dark);color:var(--neutral-light);
  font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  line-height:1.6;overflow-x:hidden}
body.no-scroll{overflow:hidden}

/* Typography */
h1,h2,h3,h4,h5,h6{color:var(--accent-gold);font-weight:700;line-height:1.2;margin-bottom:16px}
h1{font-size:2.5rem}h2{font-size:2rem}h3{font-size:1.5rem}h4{font-size:1.25rem}
p{margin-bottom:16px;color:var(--neutral-light)}
a{color:var(--accent-gold);text-decoration:none;transition:color .25s ease}
a:hover{color:var(--hover-gold)}

/* Buttons */
.button,button[type="submit"]{background:var(--accent-gold);color:var(--primary-dark);
  border:0;border-radius:6px;padding:12px 28px;font-weight:600;font-size:1rem;
  cursor:pointer;display:inline-block;transition:transform .2s,box-shadow .2s,background .2s}
.button:hover,button[type="submit"]:hover{background:var(--hover-gold);transform:translateY(-2px);box-shadow:0 4px 12px rgba(254,207,74,.3)}
.button.secondary{background:transparent;border:2px solid var(--accent-gold);color:var(--accent-gold)}
.button.secondary:hover{background:var(--accent-gold);color:var(--primary-dark)}

/* Language toggle (fixed) */
#lang-toggle{position:fixed;top:12px;right:12px;background:rgba(45,45,58,.9);
  padding:8px 16px;border-radius:24px;z-index:1400;backdrop-filter:blur(8px)}
#lang-toggle button{background:none;border:0;color:var(--neutral-mid);font-weight:600;font-size:.9rem;margin:0 6px;cursor:pointer}
#lang-toggle button.active-lang{color:var(--accent-gold);text-decoration:underline}

/* Header & nav (desktop base) */
.main-header{position:sticky;top:0;z-index:1300;background:rgba(28,28,30,.95);
  backdrop-filter:blur(10px);border-bottom:1px solid rgba(254,207,74,.1)}
.main-nav{max-width:1200px;margin:0 auto;padding:12px 24px;display:flex;align-items:center}
.logo{display:flex;align-items:center;gap:10px;color:var(--accent-gold);font-weight:700}
.logo img{border-radius:8px}
.menu-toggle{display:none;background:transparent;border:0;padding:10px;cursor:pointer;margin-left:12px}
.menu-toggle .menu-bar{display:block;width:22px;height:2px;margin:5px 0;background:var(--neutral-light);border-radius:2px;transition:transform .25s,opacity .25s}

/* ⚠️ Regla de seguridad: oculta cualquier .nav-links “suelta” */
.nav-links{display:none}

/* Solo estilizamos la lista dentro de #primary-nav */
#primary-nav>.nav-links{
  display:flex;gap:28px;margin:0 auto; /* centrado */
  list-style:none;white-space:nowrap;
}
#primary-nav>.nav-links a{color:var(--neutral-light);font-weight:500;position:relative}
#primary-nav>.nav-links a::after{content:"";position:absolute;left:0;bottom:-4px;height:2px;width:0;background:var(--accent-gold);transition:width .25s}
#primary-nav>.nav-links a:hover::after,#primary-nav>.nav-links a.active::after{width:100%}
#primary-nav>.nav-links a.active{color:var(--accent-gold)}

/* Sections */
section{max-width:1200px;margin:0 auto;padding:80px 24px}
.section-subtitle{text-align:center;color:var(--neutral-mid);margin-bottom:48px}

/* Hero */
.hero{position:relative;overflow:hidden;text-align:center;padding:96px 20px 64px;
  background:radial-gradient(circle at top,var(--secondary-dark),var(--primary-dark))}
.hero::before{content:"";position:absolute;top:0;left:50%;transform:translateX(-50%);
  width:800px;height:400px;background:radial-gradient(circle,rgba(254,207,74,.1),transparent);pointer-events:none}
.hero-logo-container{display:flex;justify-content:center;margin-bottom:16px}
.hero-logo{width:clamp(100px,10vw,160px);height:auto;filter:drop-shadow(0 0 10px rgba(254,207,74,.2))}
.hero h1{font-size:clamp(1.7rem,4.8vw,3rem);line-height:1.15;margin-top:8px}
.hero p{font-size:clamp(.95rem,2.6vw,1.25rem);margin-bottom:40px}
.cta-group{display:flex;gap:16px;flex-wrap:wrap;justify-content:center}

/* Cards / grids (resumen) */
.about-content{max-width:900px;margin:0 auto}
.about-pillars{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:32px;margin-top:48px}
.pillar{background:var(--card-bg);padding:32px;border-radius:10px;border:1px solid rgba(254,207,74,.1);transition:border-color .2s,transform .2s,box-shadow .2s}
.pillar:hover{transform:translateY(-4px);border-color:var(--accent-gold);box-shadow:0 8px 24px rgba(254,207,74,.15)}

.gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:32px;margin-top:48px}
.solution-card{background:var(--card-bg);border-radius:10px;border:1px solid rgba(254,207,74,.1);overflow:hidden;transition:transform .2s,box-shadow .2s,border-color .2s}
.solution-card:hover{transform:translateY(-6px);box-shadow:0 12px 32px rgba(0,0,0,.4);border-color:var(--accent-gold)}
.solution-card img{width:100%;height:200px;object-fit:cover;display:block}

/* Footer */
.main-footer{background:var(--secondary-dark);margin-top:80px;padding:60px 24px 24px;border-top:1px solid rgba(254,207,74,.1)}
.footer-content{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:40px;margin-bottom:40px}
.footer-bottom{max-width:1200px;margin:0 auto;border-top:1px solid rgba(254,207,74,.1);padding-top:24px;text-align:center}
.footer-bottom p{color:var(--neutral-mid);font-size:.85rem}

/* =========================
   Mobile overlay nav
========================= */
@media (max-width:992px){
  :root{--header-h:56px}
  .menu-toggle{display:inline-block}
  /* Panel SOLO para #primary-nav > .nav-links  */
  #primary-nav>.nav-links{
    position:fixed;inset:var(--header-h) 0 0 0;display:flex;flex-direction:column;
    gap:0;padding:14px 16px 24px;background:rgba(28,28,30,.98);
    backdrop-filter:blur(8px);transform:translateY(-110%);transition:transform .28s ease;
    border-top:1px solid rgba(254,207,74,.12);z-index:1200;overflow-y:auto;
    -webkit-overflow-scrolling:touch; /* iOS momentum */
  }
  /* Al abrir el nav (via JS: nav#primary-nav.open) */
  #primary-nav.open>.nav-links{transform:translateY(0)}
  #primary-nav>.nav-links li{border-bottom:1px solid rgba(254,207,74,.08)}
  #primary-nav>.nav-links a{display:block;padding:14px 6px;font-size:1.05rem}

  /* language toggle visible y por encima del overlay */
  #lang-toggle{z-index:1400}

  .hero{padding:84px 18px 56px}
  section{padding:60px 20px}
}

/* Pequeños */
@media (max-width:480px){
  h1{font-size:1.8rem}h2{font-size:1.5rem}
}

/* iOS safe areas */
@supports(padding:max(0px)){
  .main-header{padding-left:max(16px,env(safe-area-inset-left));padding-right:max(16px,env(safe-area-inset-right))}
  #primary-nav>.nav-links{padding-bottom:calc(24px + env(safe-area-inset-bottom))}
}

/* ====== Anti overflow global (evita scroll lateral) ====== */
html, body { width: 100%; overflow-x: hidden; }
img, svg, video { max-width: 100%; height: auto; display: block; }

/* ====== Header ====== */
:root { --header-h: 64px; } /* 56px en móviles abajo */
@media (max-width:600px){ :root { --header-h: 56px; } }

.main-header{
  position: sticky; top: 0; z-index: 1100;
  background: rgba(28,28,30,.95);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(254,207,74,.1);
}

.main-nav{
  max-width: min(1200px, 100vw);
  margin: 0 auto; padding: 12px 16px;
  display: grid; grid-template-columns: auto 1fr auto; gap: 12px;
  align-items: center;
}

.brand{ display:flex; align-items:center; gap:10px; color: var(--accent-gold); font-weight:700; }
.brand img{ border-radius: 6px; }

.menu-toggle{
  display:none; background:transparent; border:0; padding:8px; cursor:pointer;
}
.menu-toggle .menu-bar{
  display:block; width:22px; height:2px; margin:5px 0;
  background: var(--neutral-light); border-radius:2px;
  transition: transform .25s ease, opacity .25s ease;
}

.nav-links{
  list-style:none; display:flex; gap:28px; justify-self:center;
  margin:0; padding:0;
}
.nav-links a{
  color: var(--neutral-light); font-weight:500; font-size:.95rem; position:relative; white-space:nowrap;
}
.nav-links a::after{
  content:""; position:absolute; left:0; bottom:-4px; height:2px; width:0;
  background: var(--accent-gold); transition: width .25s ease;
}
.nav-links a:hover::after, .nav-links a.active::after{ width:100%; }
.nav-links a.active{ color: var(--accent-gold); }

/* ====== Toggle idioma: pegar a la derecha en desktop, bajo en mobile ====== */
#lang-toggle{ display:flex; align-items:center; gap:6px; justify-self:end; }
#lang-toggle button{ background:none; border:0; color:var(--neutral-mid); font-weight:600; cursor:pointer; padding:4px 8px; }
#lang-toggle button.active-lang{ color:var(--accent-gold); text-decoration:underline; }
#lang-toggle span{ color:var(--neutral-mid); }

/* ====== Mobile overlay nav ====== */
@media (max-width: 992px){
  .menu-toggle{ display:inline-block; justify-self:start; }

  /* En mobile el menú normal se oculta (fila de desktop) */
  .nav-links{
    position: fixed;
    top: var(--header-h); left:0; right:0;
    height: calc(100dvh - var(--header-h));        /* ocupa el alto visible */
    background: rgba(28,28,30,.98);
    backdrop-filter: blur(8px);
    display: flex; flex-direction: column; gap: 0;
    padding: 10px 16px 24px;
    border-top: 1px solid rgba(254,207,74,.12);
    transform: translateY(-110%);                  /* oculto por defecto */
    transition: transform .28s ease;
    z-index: 1200;
    overflow-y: auto;                               /* scroll propio */
    max-width: 100vw;                               /* evita desborde */
  }
  /* al abrir (JS agrega 'open' al nav contenedor) */
  .main-nav.open .nav-links{ transform: translateY(0); }

  .nav-links li{ border-bottom: 1px solid rgba(254,207,74,.08); }
  .nav-links a{ display:block; padding:14px 6px; font-size:1.05rem; }

  /* mover el switch de idioma bajo la lista para que no tape nada */
  #lang-toggle{
    position: fixed; left:0; right:0; bottom:0;
    padding: 10px 12px; justify-content:center;
    background: rgba(28,28,30,.98);
    z-index: 1201;
  }

  /* animación del icono (cuando body está bloqueado) */
  body.no-scroll .menu-toggle .menu-bar:nth-child(1){ transform: translateY(7px) rotate(45deg); }
  body.no-scroll .menu-toggle .menu-bar:nth-child(2){ opacity: 0; }
  body.no-scroll .menu-toggle .menu-bar:nth-child(3){ transform: translateY(-7px) rotate(-45deg); }
}

/* ====== Safe areas iOS ====== */
@supports (padding: max(0px)) {
  .main-nav{ padding-left:max(16px, env(safe-area-inset-left)); padding-right:max(16px, env(safe-area-inset-right)); }
  .nav-links{ padding-bottom: max(24px, env(safe-area-inset-bottom)); }
  #lang-toggle{ padding-bottom: max(10px, env(safe-area-inset-bottom)); }
}

/* ===== Layout del header en desktop ===== */
.main-nav{
  max-width:1200px; margin:0 auto; padding:16px 24px;
  display:grid; grid-template-columns:auto 1fr auto; gap:16px; align-items:center;
}
.nav-actions{ display:flex; align-items:center; gap:12px; }

/* Desktop: los links se muestran en línea y SIN overlay */
@media (min-width: 993px){
  #primary-nav{
    position: static !important;
    inset: auto !important;
    transform: none !important;
    background: transparent !important;
    border: 0 !important;
    backdrop-filter: none !important;
    padding: 0 !important;
    height: auto !important;
    overflow: visible !important;
    display: flex !important;
    gap: 32px;
  }
  .menu-toggle{ display:none !important; }
  .nav-backdrop{ display:none !important; }
}

/* Mobile overlay “debajo del header” (tu JS añade .open al UL) */
:root{ --header-h: 64px; }
@media (max-width: 600px){ :root{ --header-h: 56px; } }

@media (max-width: 992px){
  /* el UL actúa como panel */
  #primary-nav{
    position: fixed;
    inset: var(--header-h) 0 0 0;   /* ocupa todo el ancho seguro */
    background: rgba(28,28,30,.98);
    backdrop-filter: blur(8px);
    display: flex; flex-direction: column;
    gap: 0;
    padding: 12px 16px 24px;
    transform: translateY(-110%);
    transition: transform .28s ease;
    border-top: 1px solid rgba(254,207,74,.12);
    z-index: 1200;
    overflow-y: auto;
  }
  #primary-nav.open{ transform: translateY(0); }

  /* enlaces del panel */
  #primary-nav li{ border-bottom:1px solid rgba(254,207,74,.08); }
  #primary-nav a{ display:block; padding:14px 6px; font-size:1.05rem; }

  /* acciones: idioma + hamburguesa visibles */
  .menu-toggle{ display:inline-flex; background:transparent; border:0; padding:10px; cursor:pointer; }
  .menu-bar{ width:22px; height:2px; margin:5px 0; background:var(--neutral-light); border-radius:2px; }

  /* animación del ícono cuando body está bloqueado por el JS */
  body.no-scroll .menu-toggle .menu-bar:nth-child(1){ transform: translateY(7px) rotate(45deg); }
  body.no-scroll .menu-toggle .menu-bar:nth-child(2){ opacity: 0; }
  body.no-scroll .menu-toggle .menu-bar:nth-child(3){ transform: translateY(-7px) rotate(-45deg); }

  /* cluster derecho horizontal; idioma no tapa contenido */
  .nav-actions{ gap:8px; }
  #lang-toggle{ position: static; background: transparent; box-shadow: none; padding: 0; }
  #lang-toggle button{ padding:4px 6px; font-size:.95rem; }
}

/* Backdrop (lo muestra/oculta tu JS) */
.nav-backdrop{
  position: fixed; inset: 0; background: rgba(0,0,0,.45);
  z-index: 1100; display: none;
}
body.no-scroll #nav-backdrop{ display:block; }

/* Evita scroll lateral en móviles */
html, body{ max-width: 100%; overflow-x: hidden; }